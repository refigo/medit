#!/usr/bin/env python3
from sqlmodel import Session, select
from app.database import engine
from app.models import Disease

# 기본 질병 데이터
diseases_data = [
    {
        "name": "편두통",
        "summary": "주기적으로 반복되는 강한 두통",
        "description": "머리 한쪽에서 욱신거리는 통증이 주로 발생합니다. 메스꺼움, 구토, 빛/소리에 예민해짐 등의 증상을 동반합니다. 수시간~수일 지속될 수 있습니다. 일부는 전조증상(빛이 번쩍이거나, 시야가 흐릿지는 등)이 나타납니다."
    },
    {
        "name": "고혈압",
        "summary": "지속적으로 상승된 혈압 수치",
        "description": "혈관 벽에 가해지는 압력이 지속해서 높아지는 상태입니다. 대부분 증상이 없어 '침묵의 살인자'라고도 불립니다. 심장병, 뇌졸중, 신장 질환 등 심각한 합병증을 유발할 수 있습니다. 생활습관 개선과 약물치료로 관리가 가능합니다."
    },
    {
        "name": "당뇨병",
        "summary": "혈액 내 포도당 수치가 높아지는 만성 질환",
        "description": "인슐린 생산 부족 또는 인슐린에 대한 세포 반응 저하로 인해 발생합니다. 주요 증상으로는 갈증 증가, 잦은 소변, 식욕 증가, 체중 감소, 피로감 등이 있습니다. 제1형과 제2형으로 분류되며, 관리되지 않으면 심각한 합병증을 초래할 수 있습니다."
    },
    {
        "name": "감기",
        "summary": "바이러스 감염으로 인한 상기도 감염",
        "description": "코, 목, 상부 기관지를 포함한 상기도에 영향을 미치는 바이러스성 감염입니다. 콧물, 인후통, 기침, 미열, 두통 등의 증상이 나타납니다. 보통 7-10일 지속되며 자연적으로 회복됩니다. 충분한 휴식과 수분 섭취가 중요합니다."
    },
    {
        "name": "천식",
        "summary": "기도가 좁아지고 염증이 생기는 만성 폐 질환",
        "description": "기도의 만성 염증으로 인해 호흡곤란, 가슴 압박감, 기침, 천명음(쌕쌕거림) 등이 발생합니다. 알레르기 유발 물질, 운동, 찬 공기 등에 의해 증상이 악화될 수 있습니다. 증상은 간헐적으로 나타나며 흡입기 사용으로 관리가 가능합니다."
    },
    {
        "name": "관절염",
        "summary": "관절에 염증이 생기는 질환",
        "description": "관절의 통증, 뻣뻣함, 부종을 특징으로 하는 100가지 이상의 질환을 포함합니다. 가장 흔한 유형은 퇴행성 관절염(골관절염)과 류마티스 관절염입니다. 나이가 들수록 발생 가능성이 높아지며, 완치는 어렵지만 통증 관리와 기능 유지를 위한 치료가 가능합니다."
    },
    {
        "name": "위궤양",
        "summary": "위 점막에 생기는 열린 상처",
        "description": "위산이나 헬리코박터 파일로리 세균에 의해 위 점막이 손상되어 생기는 질환입니다. 상복부 통증(특히 공복 시), 소화불량, 속쓰림, 메스꺼움, 구토 등의 증상이 나타납니다. 약물 치료와 생활습관 개선으로 치료가 가능합니다."
    },
    {
        "name": "우울증",
        "summary": "지속적인 슬픔과 흥미 상실을 특징으로 하는 정신 질환",
        "description": "지속적인 슬픔, 무기력, 흥미 상실, 수면 및 식욕 변화, 집중력 저하, 자존감 감소, 죄책감, 자살 생각 등이 특징입니다. 유전적, 생화학적, 환경적, 심리적 요인이 복합적으로 작용하여 발생합니다. 심리 치료와 약물 치료의 병행이 효과적입니다."
    },
    {
        "name": "불안장애",
        "summary": "과도한 걱정과 불안감을 느끼는 정신 질환",
        "description": "지속적이고 과도한 불안, 걱정, 공포감 등이 특징인 정신 질환의 집합입니다. 일반화된 불안장애, 공황장애, 사회불안장애, 특정 공포증 등 여러 유형이 있습니다. 심장 두근거림, 호흡 곤란, 발한, 떨림 등의 신체 증상이 동반될 수 있습니다."
    },
    {
        "name": "역류성 식도염",
        "summary": "위 내용물이 식도로 역류하여 발생하는 염증",
        "description": "위산이 식도로 역류하여 식도 점막에 자극과 염증을 일으키는 질환입니다. 가슴쓰림, 산 역류, 삼킴 곤란, 목의 이물감, 만성 기침 등의 증상이 나타납니다. 식이 조절, 생활습관 개선, 약물 치료가 효과적입니다."
    },
    {
        "name": "과민성 장 증후군",
        "summary": "장의 기능 이상으로 인한 만성 소화기 질환",
        "description": "장의 운동성 이상으로 복통, 복부 팽만감, 설사 또는 변비, 또는 이들의 교대 등이 발생하는 기능성 장애입니다. 스트레스, 특정 음식, 호르몬 변화 등이 증상을 악화시킬 수 있습니다. 증상에 따른 대증 치료와 식이 조절이 주요 관리법입니다."
    },
    {
        "name": "갑상선 기능항진증",
        "summary": "갑상선 호르몬이 과도하게 분비되는 상태",
        "description": "갑상선에서 호르몬이 과도하게 생성되어 신체의 신진대사가 비정상적으로 증가하는 상태입니다. 체중 감소, 빠른 심장 박동, 불안감, 발한 증가, 열에 대한 과민반응, 피로감, 근육 약화 등의 증상이 나타납니다. 약물 치료, 방사성 요오드 치료, 수술 등으로 치료합니다."
    },
    {
        "name": "갑상선 기능저하증",
        "summary": "갑상선 호르몬의 생성이 부족한 상태",
        "description": "갑상선 호르몬 부족으로 신체의 신진대사가 느려지는 상태입니다. 피로감, 추위에 민감, 체중 증가, 변비, 건조한 피부, 부종, 우울감, 기억력 저하 등의 증상이 나타납니다. 호르몬 대체 요법으로 효과적으로 관리될 수 있습니다."
    },
    {
        "name": "골다공증",
        "summary": "뼈의 밀도와 질이 감소하는 질환",
        "description": "뼈 조직의 밀도와 강도가 감소하여 골절 위험이 증가하는 질환입니다. 주로 증상 없이 진행되다가 골절이 발생하면 발견됩니다. 노화, 여성 호르몬 감소, 칼슘 부족, 약물 사용 등이 위험 요인입니다. 칼슘과 비타민 D 보충, 체중 부하 운동, 약물 치료가 도움이 됩니다."
    },
    {
        "name": "건선",
        "summary": "피부 세포가 빠르게 자라 붉고 비늘처럼 각질이 생기는 피부 질환",
        "description": "면역계의 이상으로 피부 세포가 가속화되어 자라면서 피부에 두껍고 붉은 반점이 생기고 은백색의 비늘이 덮이는 만성 피부 질환입니다. 유전적 요소와 환경적 유발 요인이 복합적으로 작용합니다. 국소 치료제, 광선 치료, 전신 약물 등으로 증상을 관리합니다."
    },
    {
        "name": "간염",
        "summary": "간에 염증이 생기는 질환",
        "description": "바이러스 감염, 알코올 남용, 약물, 자가면역 질환 등으로 인해 간에 염증이 생기는 상태입니다. A, B, C형 등 다양한 유형의 바이러스성 간염이 존재합니다. 피로감, 황달, 복통, 구역감, 식욕 저하 등의 증상이 나타날 수 있습니다. 유형에 따라 치료 방법과 예후가 다릅니다."
    },
    {
        "name": "만성 폐쇄성 폐질환",
        "summary": "폐로의 공기 흐름이 지속적으로 제한되는 질환",
        "description": "만성 기관지염과 폐기종을 포함하는 진행성 폐 질환으로, 담배 연기나 유해 가스 등에 장기간 노출됨으로써 발생합니다. 점진적인 호흡 곤란, 만성 기침, 가래 생성, 천명음, 흉부 압박감 등이 특징입니다. 완치는 어렵지만 증상 관리와 악화 방지가 가능합니다."
    },
    {
        "name": "알츠하이머병",
        "summary": "뇌 기능이 서서히 저하되는 진행성 신경 퇴행성 질환",
        "description": "뇌의 단백질 축적으로 인한 신경 세포 손상으로 기억력, 사고력, 언어 능력 등이 점진적으로 감소하는 치매의 가장 흔한 형태입니다. 초기에는 최근 기억 상실에서 시작하여 나중에는 일상생활 수행 능력 저하로 진행됩니다. 현재로서는 완치법은 없지만 증상을 완화하는 약물과 보조 요법이 있습니다."
    },
    {
        "name": "녹내장",
        "summary": "안압 상승으로 시신경이 손상되는 안과 질환",
        "description": "눈의 압력(안압)이 상승하여 시신경이 손상되는 질환입니다. 초기에는 대개 증상이 없지만, 점차 주변 시야가 손실되고 결국 실명까지 이를 수 있습니다. 정기적인 안과 검진을 통해 조기 발견과 치료가 중요합니다. 약물, 레이저 치료, 수술 등으로 안압을 조절할 수 있습니다."
    },
    {
        "name": "백내장",
        "summary": "눈의 수정체가 흐려지는 안과 질환",
        "description": "눈의 수정체가 혼탁해져 시력이 흐려지고 빛 번짐이나 눈부심이 증가하는 질환입니다. 주로 노화에 의해 발생하지만, 외상, 약물, 다른 질환 등의 원인도 있습니다. 초기에는 안경 처방으로 대응할 수 있으나, 심해지면 수정체를 인공 렌즈로 교체하는 수술이 필요합니다."
    }
]

def seed_diseases():
    with Session(engine) as session:
        # 기존 질병 데이터 확인
        existing_diseases = {d.name: d for d in session.exec(select(Disease)).all()}
        
        # 새로운 질병 추가 또는 기존 질병 업데이트
        for disease_data in diseases_data:
            if disease_data["name"] in existing_diseases:
                # 기존 질병 업데이트
                disease = existing_diseases[disease_data["name"]]
                for key, value in disease_data.items():
                    setattr(disease, key, value)
                print(f"질병 업데이트: {disease_data['name']}")
            else:
                # 새 질병 추가
                disease = Disease(**disease_data)
                session.add(disease)
                print(f"질병 추가: {disease_data['name']}")
        
        session.commit()
        print(f"총 {len(diseases_data)}개의 질병 데이터가 처리되었습니다.")

if __name__ == "__main__":
    print("질병 데이터 추가를 시작합니다...")
    seed_diseases()
    print("질병 데이터 추가가 완료되었습니다!")
